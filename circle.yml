machine:
  node:
    version: 8.9.3
  services:
    - docker
  environment:
    TRAVIS_REPO_SLUG: Evino/chablis

dependencies:
  pre:
    - npm install

test:
  override:
    - npm run lint
    - npm run test -- --coverage

deployment:
    production:
      branch: master
      commands:
        #publish
        curl -u [USERNAME]:[PASSWORD] https://registry.npmjs.org/-/npm/v1/tokens \
        -X POST -H 'content-type: application/json' \
        -d '{"password":"[PASSWORD]", "readonly": "true"}'